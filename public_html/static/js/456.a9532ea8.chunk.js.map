{"version":3,"file":"static/js/456.a9532ea8.chunk.js","mappings":"uOAmGA,UA3FkC,WAAO,IAAD,EAC9BA,GAAMC,EAAAA,EAAAA,KAAND,EACFE,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,MAEjB,GAA0BC,EAAAA,EAAAA,UAAS,IAAG,eAA/BC,EAAK,KAAEC,EAAQ,KACtB,GAA4CF,EAAAA,EAAAA,UAAS,IAAG,eAAjDG,EAAc,KAAEC,EAAiB,MAMxCC,EAAAA,EAAAA,YAAU,WACR,IACE,IACY,EAAZ,IADsBC,KAAKC,MAAMC,aAAaC,QAAQ,SAAO,IAAQ,GAAU,MAE3D,QAAlB,EAAIX,EAASY,aAAK,OAAd,EAAgBC,KAClBf,EAASE,EAASY,MAAMC,MAExBf,EAAS,UAKf,CAFE,MAAOK,GACPL,EAAS,UACX,CAEA,IAAMgB,EAAgB,yCAAG,+FAOtB,OANKC,EAAQP,KAAKC,MAAMC,aAAaC,QAAQ,SAAO,IAAQ,GAAU,MACjEK,EAAS,CACbC,QAAS,CACP,eAAgB,mBAChBC,cAAc,UAAD,OAAYH,KAE3B,EAAD,gBAGwBI,EAAAA,GAAAA,IAAU,eAAgBH,GAAQ,KAAD,WAAhDI,EAAI,EAAJA,KACRd,EAAkBc,EAAKC,SAAS,kDAEhCX,aAAaY,WAAW,aACxBlB,EAAS,wCAAwC,0DAEpD,kBAhBqB,mCAkBtBU,GAEF,GAAG,CAAChB,EAAwB,QAAhB,EAAEE,EAASY,aAAK,aAAd,EAAgBC,OAE9B,IAQMU,EAAWb,aAAaC,QAAQ,aAAW,GAC3Ca,EAAQd,aAAaC,QAAQ,UAAQ,GAE3C,OAAOR,GAAS,iBAAMsB,UAAU,gBAAe,SAAEtB,KAE/C,gBAAKsB,UAAU,kBAAiB,UAC9B,gBAAKA,UAAU,MAAK,UAClB,oBAAQA,UAAU,aAAY,WAC5B,eAAGA,UAAU,KAAI,uBAAWC,EAAAA,EAAAA,IAAWH,OACvC,eAAGE,UAAU,KAAI,qBAASC,EAAAA,EAAAA,IAAWF,OACrC,eAAGC,UAAU,gCAA+B,UAAE7B,EAAE,WAAU,mBACxD,iBAAM6B,UAAU,iBAAgB,4BAElC,cACEA,UAAU,qCACVE,KAAK,sCACLC,OAAO,SACPC,IAAI,sBAAqB,yCAI3B,SAAC,KAAI,KACL,SAAC,KAAI,CAACC,GAAG,kBAAiB,mBAC1B,oBAASL,UAAU,UAAS,UAC1B,SAAC,KAAM,OAET,iBAAKM,MAAO,CAAEC,WAAY,QAASC,MAAO,SAAU,cAAG5B,MACvD,mBAAQ6B,QAnCM,WACpBxB,aAAaY,WAAW,UACxBa,EAAAA,EAAAA,IAAY,OAAQ,EAAG,SAEvBrC,EAAS,KA3CTsC,OAAOC,cAAc,IAAIC,MAAM,UA6CjC,EA6BuC,2BAKzC,C","sources":["components/pages/dashboard/DashboardScreen.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { Link, Outlet, useLocation, useNavigate } from \"react-router-dom\";\r\n\r\nimport { Game } from '../../screens';\r\nimport { capitalize, clearLSItem } from '..';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nconst DashboardScreen: React.FC = () => {\r\n  const { t } = useTranslation();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n\r\n  const [error, setError] = useState(\"\");\r\n  const [privateMessage, setPrivateMessage] = useState(\"\");\r\n\r\n  const handleLocalStorage = () => {\r\n    window.dispatchEvent(new Event(\"logout\"));\r\n  };\r\n\r\n  useEffect(() => {\r\n    try {\r\n      const token: string = JSON.parse(localStorage.getItem(\"user\") || ``)[0][\"token\"];\r\n      if (!token) {\r\n        if (location.state?.from) {\r\n          navigate(location.state.from);\r\n        } else {\r\n          navigate(\"/signin\");\r\n        }\r\n      }\r\n    } catch (error) {\r\n      navigate(\"/signin\");\r\n    }\r\n\r\n    const fetchPrivateData = async () => {\r\n      const token = JSON.parse(localStorage.getItem(\"user\") || ``)[0][\"token\"];\r\n      const config = {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${token}`\r\n        }\r\n      };\r\n\r\n      try {\r\n        const { data } = await axios.get(\"/api/private\", config);\r\n        setPrivateMessage(data.message);\r\n      } catch (error) {\r\n        localStorage.removeItem(\"authToken\");\r\n        setError(\"You are not authorized please login!\");\r\n      }\r\n    };\r\n\r\n    fetchPrivateData();\r\n\r\n  }, [navigate, location.state?.from]);\r\n\r\n  const logoutHandler = () => {\r\n    localStorage.removeItem(\"TwoFA\");\r\n    clearLSItem('user', 0, 'token');\r\n    //localStorage.removeItem(\"user\"); // Break out\r\n    navigate(\"/\");\r\n    handleLocalStorage();\r\n  };\r\n\r\n  const username = localStorage.getItem(\"Username\") || ``;\r\n  const email = localStorage.getItem(\"Email\") || ``;\r\n\r\n  return error ? (<span className=\"error-message\">{error}</span>\r\n  ) : (\r\n    <div className=\"fixed-container\">\r\n      <div className=\"App\">\r\n        <header className=\"App-header\">\r\n          <p className='h3'>Welcome, {capitalize(username)}</p>\r\n          <p className='h3'>Email: {capitalize(email)}</p>\r\n          <p className='text-uppercase agis-bold mt-2'>{t(\"mattix\")}<br />\r\n            <code className='text-lowercase'>mattix.com</code>\r\n          </p>\r\n          <a\r\n            className=\"App-link mb-4 text-decoration-none\"\r\n            href=\"https://camunited.000webhostapp.com\"\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n          >\r\n            Go to previous version@1.0\r\n          </a>\r\n          <Game />\r\n          <Link to=\"/dashboard/stat\">Stat</Link>\r\n          <section className=\"section\">\r\n            <Outlet />\r\n          </section>\r\n          <div style={{ background: \"green\", color: \"white\" }}> {privateMessage}</div>\r\n          <button onClick={logoutHandler}>Log out</button>\r\n        </header>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\nexport default DashboardScreen;"],"names":["t","useTranslation","navigate","useNavigate","location","useLocation","useState","error","setError","privateMessage","setPrivateMessage","useEffect","JSON","parse","localStorage","getItem","state","from","fetchPrivateData","token","config","headers","Authorization","axios","data","message","removeItem","username","email","className","capitalize","href","target","rel","to","style","background","color","onClick","clearLSItem","window","dispatchEvent","Event"],"sourceRoot":""}